{"version":3,"sources":["store/store.tsx","components/RecipeCard.tsx","components/RecipeList.tsx","App.tsx","index.tsx","components/RecipeDetails.tsx"],"names":["pageNumber","previousNum","useStore","create","set","recipes","selectedRecipes","setRecipes","addSelectedRecipe","recipeId","state","removeSelectedRecipe","filter","id","removeAllSelectedRecipes","loadMoreRecipes","num","countDel","a","repeatDown","repeatUp","countLoad","Math","floor","axios","get","response","updatedRecipes","data","splice","slice","console","error","RecipeCard","recipe","useState","isSelected","setIsSelected","to","onContextMenu","e","preventDefault","className","classNames","selected","src","image_url","alt","name","description","length","RecipeList","map","App","useEffect","fetchRecipes","isLoading","setIsLoading","previousScrollTop","useRef","handleScroll","scrollTop","document","documentElement","current","scrollHeight","window","innerHeight","addEventListener","removeEventListener","then","scrollTo","top","behavior","catch","onClick","updateRecipe","el","includes","type","ReactDOM","render","index","element","path","Component","useParams","find","rec","parseInt","first_brewed","abv","ibu","getElementById"],"mappings":"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","file":"static/js/main.1116fb65.chunk.js","sourcesContent":["import { create } from 'zustand';\nimport axios from 'axios';\nimport { Recipe } from '../types/Recipe';\n\ninterface Store {\n  recipes: Recipe[];\n  selectedRecipes: number[];\n  setRecipes: (recipes: Recipe[]) => void;\n  addSelectedRecipe: (recipeId: number) => void;\n  removeSelectedRecipe: (recipeId: number) => void;\n  removeAllSelectedRecipes: () => void;\n  loadMoreRecipes: (num:number, countDel?:number) => Promise<void>;\n}\nlet pageNumber = 3;\nlet previousNum = 1;\n\nexport const useStore = create<Store>((set) => ({\n  recipes: [],\n  selectedRecipes: [],\n\n  setRecipes: (recipes) => set({ recipes }),\n  addSelectedRecipe: (recipeId:number) => set((state) => ({\n    selectedRecipes: [...state.selectedRecipes, recipeId],\n  })),\n  removeSelectedRecipe: (recipeId:number) => set((state) => ({\n    selectedRecipes: state.selectedRecipes.filter((id) => id !== recipeId),\n  })),\n  removeAllSelectedRecipes: () => set({ selectedRecipes: [] }),\n  loadMoreRecipes: async (num: number, countDel?:number) => {\n    const repeatDown = previousNum === 1 && num > 0;\n    const repeatUp = previousNum === -1 && num < 0;\n\n    if (countDel) {\n      const countLoad = Math.floor(countDel / 5) + 1;\n\n      pageNumber += countLoad;\n    }\n\n    if (pageNumber === 1 && num < 0) {\n      return;\n    }\n\n    if (!repeatDown && pageNumber === 3 && !repeatUp) {\n      return;\n    }\n\n    if (repeatDown) {\n      pageNumber += 1;\n    }\n\n    if (num > 0 && !repeatDown) {\n      pageNumber += 3;\n    }\n\n    if (repeatUp) {\n      pageNumber -= 1;\n    }\n\n    if (num < 0 && !repeatUp) {\n      pageNumber -= 3;\n    }\n\n    try {\n      const response = await axios.get<Recipe[]>(\n        `https://api.punkapi.com/v2/beers?page=${pageNumber}&per_page=5`,\n      );\n\n      set((state) => {\n        let updatedRecipes: Recipe[];\n\n        if (countDel) {\n          updatedRecipes = [...state.recipes, ...response.data.splice(0, countDel)];\n        } else if (num > 0) {\n          updatedRecipes = [...state.recipes.slice(5), ...response.data];\n        } else {\n          updatedRecipes = [...response.data, ...state.recipes.slice(0, 10)];\n        }\n\n        previousNum = num;\n\n        return {\n          recipes: updatedRecipes,\n        };\n      });\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('Error loading more recipes:', error);\n    }\n  },\n\n}));\n","/* eslint-disable no-console */\nimport React, { useState } from 'react';\nimport classNames from 'classnames';\nimport { Link } from 'react-router-dom';\n\nimport { Recipe } from '../types/Recipe';\nimport { useStore } from '../store/store';\n\ntype Props = {\n  recipe: Recipe;\n};\nexport const RecipeCard:React.FC<Props> = ({ recipe }) => {\n  const [isSelected, setIsSelected] = useState(false);\n  const { addSelectedRecipe, removeSelectedRecipe } = useStore();\n  const handleRightClick = (e:React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    setIsSelected(!isSelected);\n\n    if (!isSelected) {\n      addSelectedRecipe(recipe.id);\n    } else {\n      removeSelectedRecipe(recipe.id);\n    }\n  };\n\n  return (\n    <Link\n      to={`/recipe/${recipe.id}`}\n      onContextMenu={handleRightClick}\n      className={classNames(\n        'card',\n        { selected: isSelected },\n      )}\n    >\n      <img\n        className=\"card__img\"\n        src={recipe.image_url}\n        alt={recipe.name}\n      />\n      <p className=\"card__name\">{recipe.name}</p>\n      <p className=\"card__desc\">{recipe.description.length > 50 ? `${recipe.description}...` : recipe.description}</p>\n    </Link>\n  );\n};\n","import React from 'react';\nimport { Recipe } from '../types/Recipe';\nimport { RecipeCard } from './RecipeCard';\n\ntype Props = {\n  recipes: Recipe[];\n};\n\nexport const RecipeList:React.FC<Props> = ({ recipes }) => {\n  return (\n    <div className=\"recipe__container\">\n      {recipes.map(recipe => (\n        <RecipeCard key={recipe.id} recipe={recipe} />\n      ))}\n    </div>\n  );\n};\n","/* eslint-disable no-console */\nimport React, { useEffect, useRef, useState } from 'react';\nimport './App.scss';\nimport axios from 'axios';\nimport { useStore } from './store/store';\nimport { Recipe } from './types/Recipe';\nimport { RecipeList } from './components/RecipeList';\n\nexport const App: React.FC = () => {\n  const {\n    recipes,\n    setRecipes,\n    selectedRecipes,\n    loadMoreRecipes,\n    removeAllSelectedRecipes,\n  } = useStore();\n\n  useEffect(() => {\n    const fetchRecipes = async () => {\n      try {\n        const response = await axios.get<Recipe[]>(\n          'https://api.punkapi.com/v2/beers?page=1&per_page=15',\n        );\n\n        setRecipes(response.data);\n      } catch (error) {\n        console.error('Error fetching recipes:', error);\n      }\n    };\n\n    fetchRecipes();\n  }, [setRecipes]);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const previousScrollTop = useRef(0);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      if (!isLoading) {\n        const { scrollTop } = document.documentElement;\n\n        if (\n          scrollTop > previousScrollTop.current\n          && document.documentElement.scrollHeight\n           - (window.innerHeight + scrollTop) <= 5\n        ) {\n          setIsLoading(true);\n        }\n\n        if (\n          scrollTop < previousScrollTop.current\n          && scrollTop <= 5\n        ) {\n          setIsLoading(true);\n        }\n\n        previousScrollTop.current = scrollTop;\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [isLoading]);\n\n  useEffect(() => {\n    if (isLoading) {\n      loadMoreRecipes(previousScrollTop.current < 5 ? -1 : 1)\n        .then(() => {\n          if (recipes[0].id !== 1) {\n            window.scrollTo({\n              top: previousScrollTop.current < 5 ? 400 : 60,\n              behavior: 'smooth',\n            });\n          }\n\n          setIsLoading(false);\n        })\n        .catch((error) => {\n          setIsLoading(false);\n          console.error('Error loading more recipes:', error);\n        });\n    }\n  }, [isLoading]);\n\n  const handleDeleteRecipe = () => {\n    const updateRecipe = recipes.filter(el => !selectedRecipes.includes(el.id));\n\n    loadMoreRecipes(1, selectedRecipes.length);\n    removeAllSelectedRecipes();\n    setRecipes(updateRecipe);\n  };\n\n  return (\n    <div>\n      <h1>Beer Recipe App</h1>\n      {selectedRecipes.length ? (\n        <button onClick={handleDeleteRecipe} className=\"button\" type=\"button\">Delete selected</button>\n      ) : null}\n      <RecipeList recipes={recipes} />\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router, Routes, Route } from 'react-router-dom';\nimport './index.scss';\nimport { App } from './App';\nimport { RecipeDetails } from './components/RecipeDetails';\n\nReactDOM.render(\n  <Router>\n    <Routes>\n      <Route>\n        <Route index element={<App />} />\n        <Route path=\"/recipe/:id\" Component={RecipeDetails} />\n      </Route>\n    </Routes>\n  </Router>,\n  document.getElementById('root'),\n);\n","import React, { useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport { useStore } from '../store/store';\n\nexport const RecipeDetails:React.FC = () => {\n  const { recipes, removeAllSelectedRecipes } = useStore();\n  const { id } = useParams<{ id: string }>();\n  const recipe = recipes.find(rec => rec.id === parseInt(id ?? '', 10));\n\n  if (!recipe) {\n    return <div>Loading...</div>;\n  }\n\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useEffect(() => {\n    removeAllSelectedRecipes();\n  }, []);\n\n  return (\n    <div className=\"details\">\n      <Link to=\"/\" className=\"details__link\">Home</Link>\n      <div className=\"details__content\">\n        <div className=\"details__img\">\n          <img src={recipe.image_url} alt={recipe.name}></img>\n        </div>\n        <div className=\"details__inf\">\n          <h1 className=\"details__name\">{recipe.name}</h1>\n          <p className=\"details__description\">{recipe.description}</p>\n          <p>{`first_brewed:${recipe.first_brewed}`}</p>\n          <p>{`abv:${recipe.abv}`}</p>\n          <p>{`ibu:${recipe.ibu}`}</p>\n        </div>\n      </div>\n    </div>\n\n  );\n};\n"],"sourceRoot":""}